Ext.Loader.setConfig({enabled:true});Ext.Loader.setPath("Ext.ux",path("/static/scripts/extjs/ux"));Ext.require(["Ext.grid.*","Ext.form.*","Ext.data.*","Ext.util.*","Ext.toolbar.Paging","Ext.ModelManager","Ext.tip.QuickTipManager","Ext.selection.CheckboxModel","Ext.ux.grid.FiltersFeature"]);Ext.require("Ext.grid.Scroller",function(){Ext.override(Ext.grid.Scroller,{afterRender:function(){var a=this;a.callParent();a.mon(a.scrollEl,"scroll",a.onElScroll,a);Ext.cache[a.el.id].skipGarbageCollection=true;Ext.EventManager.addListener(a.scrollEl,"scroll",a.onElScrollCheck,a);Ext.cache[a.scrollEl.id].skipGarbageCollection=true},wasScrolled:false,onElScroll:function(a,b){this.wasScrolled=true;this.fireEvent("bodyscroll",a,b)},onElScrollCheck:function(c,d,a){var b=this;if(!b.wasScrolled){b.mon(b.scrollEl,"scroll",b.onElScroll,b)}b.wasScrolled=false}})});Ext.define("Smartec.upload.Panel",{alias:"widget.smartecUpload",extend:"Ext.form.Panel",frame:true,autoHeight:true,bodyStyle:"padding: 10px 10px 0 10px;",labelWidth:50,defaults:{anchor:"95%",msgTarget:"side"},initComponent:function(){var a=this;a.callParent()}});Ext.define("Smartec.MainMenuBar",{alias:"widget.mainmenubar",extend:"Ext.toolbar.Toolbar",items:[{text:"Menu1",menu:{items:[{text:"testButton",action:"testAction"}]}}]});Ext.define("Smartec.form.Panel",{alias:"widget.smartecform",extend:"Ext.form.Panel",border:false,padding:"10px",bodyBorder:false,tab:false,constructor:function(){this.callParent(arguments)},initComponent:function(){var a=this;if(a.tab){a.setTabPanel()}a.callParent()},setTabPanel:function(){var a=this;a.items={xtype:"tabpanel",activeTab:0,defaults:{bodyStyle:"padding:10px"},plain:true,items:a.items}}});var itemsPerPage=10;Ext.define("Smartec.grid.Panel",{alias:"widget.smartecgrid",extend:"Ext.grid.Panel",requires:["Ext.selection.CheckboxModel"],border:0,scroll:true,columnLines:true,selModel:Ext.create("Ext.selection.CheckboxModel",{checkOnly:false,injectCheckbox:1}),pageSize:itemsPerPage,displayMsg:"显示第 {0} - {1} 条记录，共 {2} 条",emptyMsg:"没有记录",clearFilterMsg:"清除查询条件",autoAdded:true,topBarAutoShow:true,topBarHight:10,autoLoadStore:true,autoSetStore:true,initComponent:function(){var a=this;a.setStore();a.setCombo();a.setSelect(a.combo,a.store);a.setDockItems(a.topDockedItems,a.store,a.combo);a.setFilter(a.filterItems);a.callParent();if(a.autoAdded){Ext.getCmp("center").add(this)}},setStore:function(){var a=this;if(a.autoSetStore){a.store=Ext.create("Ext.data.Store",{model:a.model,pageSize:a.pageSize,groupField:a.groupField,autoLoad:this.autoLoadStore,remoteSort:true})}},setCombo:function(){var a=this;a.combo=Ext.create("Ext.form.ComboBox",{name:"pagesize",hiddenName:"pagesize",store:new Ext.data.ArrayStore({fields:["text","value"],data:[["10",10],["50",50],["100",100],["150",150],["200",200]]}),valueField:"value",displayField:"text",emptyText:10,width:50})},setDockItems:function(e,b,f){var d=this;var g={text:d.clearFilterMsg,height:24,iconCls:"icon-clearAll",handler:function(){d.filters.clearFilters()}};var c={dock:"top",height:d.topBarHight,xtype:"toolbar",items:e};var a={id:"pagingbar",dock:"bottom",height:23,xtype:"pagingtoolbar",store:b,displayInfo:true,displayMsg:d.displayMsg,emptyMsg:d.emptyMsg,items:["-","每页显示",f,"条"]};if(d.topBarAutoShow){d.dockedItems=[c,a]}},setSelect:function(b,a){b.on("select",function(d){var c=Ext.getCmp("pagingbar");c.pageSize=parseInt(d.getValue());itemsPerPage=parseInt(d.getValue());a.pageSize=itemsPerPage;a.load({params:{start:0,limit:itemsPerPage}});a.loadPage(1)})},setFilter:function(c){var d=this;if(d.features){var a=[];if(!Ext.isArray(d.features)){a.push(d.features)}else{a=d.features}if(c){var b={ftype:"filters",encode:true,local:false,menuFilterText:messages["ext.filters.menuFilterText"],filters:c};a.push(b)}d.features=a}}});Ext.define("Smartec.grid.PanelTest",{alias:"widget.smartecgridTest",extend:"Ext.grid.Panel",border:0,scroll:true,autoAdded:true,topBarAutoShow:true,topBarHeight:10,autoLoadStore:true,autoSetStore:true,initComponent:function(){var a=this;a.callParent();if(a.autoAdded){Ext.getCmp("center").add(this)}}});Ext.define("Second.grid.Panel",{alias:"widget.second.grid",extend:"Ext.grid.Panel",requires:["Ext.selection.CheckboxModel"],selModel:Ext.create("Ext.selection.CheckboxModel",{checkOnly:false}),border:0,scroll:true,columnLines:true,pageSize:100,displayMsg:messages["ext.pagingtoolbar.displayMsg"],emptyMsg:messages["ext.pagingtoolbar.emptyMsg"],clearFilterMsg:messages["ext.pagingtoolbar.clearFilter"],initComponent:function(){var a=this;a.setStore();a.setDockItems(a.topDockedItems,a.store);a.setFilter(a.filterItems);a.callParent()},onHide:function(){console.log("grid was hide...")},setStore:function(){var a=this;a.store=Ext.create("Ext.data.Store",{model:a.model,pageSize:a.pageSize,autoLoad:true,remoteSort:true})},setDockItems:function(e,b){var d=this;var f={text:d.clearFilterMsg,height:24,iconCls:"icon-clearAll",handler:function(){d.filters.clearFilters()}};var c={dock:"top",height:36,padding:"0 10px",xtype:"toolbar",items:e};var a={dock:"bottom",height:30,xtype:"pagingtoolbar",padding:"0 10px",store:b,displayInfo:true,displayMsg:d.displayMsg,emptyMsg:d.emptyMsg};d.dockedItems=[c,a]},setFilter:function(b){var c=this;if(b){var a={ftype:"filters",encode:true,local:false,menuFilterText:messages["ext.filters.menuFilterText"],filters:b};c.features=[a]}}});Ext.define("Three.grid.Panel",{alias:"widget.three.grid",extend:"Ext.grid.Panel",border:0,scroll:true,columnLines:true,pageSize:1000,displayMsg:messages["ext.pagingtoolbar.displayMsg"],emptyMsg:messages["ext.pagingtoolbar.emptyMsg"],clearFilterMsg:messages["ext.pagingtoolbar.clearFilter"],autoAdded:true,topBarAutoShow:true,initComponent:function(){var a=this;a.setStore();a.setDockItems(a.topDockedItems,a.store);a.setFilter(a.filterItems);a.callParent();if(a.autoAdded){Ext.getCmp("center").add(this)}},onHide:function(){console.log("grid was hide...")},setStore:function(){var a=this;a.store=Ext.create("Ext.data.Store",{model:a.model,pageSize:a.pageSize,remoteSort:true})},setDockItems:function(e,b){var d=this;var f={text:d.clearFilterMsg,height:24,iconCls:"icon-clearAll",handler:function(){d.filters.clearFilters()}};var c={dock:"top",height:25,xtype:"toolbar",items:e};var a={dock:"bottom",height:23,xtype:"pagingtoolbar",store:b,displayInfo:true,displayMsg:d.displayMsg,emptyMsg:d.emptyMsg};if(d.topBarAutoShow){d.dockedItems=[c,a]}},setFilter:function(b){var c=this;if(b){var a={ftype:"filters",encode:true,local:false,menuFilterText:messages["ext.filters.menuFilterText"],filters:b};c.features=[a]}}});Ext.define("Four.grid.Panel",{alias:"widget.smartecgrid",extend:"Ext.grid.Panel",border:0,scroll:true,columnLines:true,pageSize:1000,displayMsg:messages["ext.pagingtoolbar.displayMsg"],emptyMsg:messages["ext.pagingtoolbar.emptyMsg"],clearFilterMsg:messages["ext.pagingtoolbar.clearFilter"],autoAdded:true,topBarAutoShow:true,initComponent:function(){var a=this;a.setStore();a.setDockItems(a.topDockedItems,a.store);a.setFilter(a.filterItems);a.callParent();if(a.autoAdded){Ext.getCmp("center").add(this)}},onHide:function(){console.log("grid was hide...")},setStore:function(){var a=this;a.store=Ext.create("Ext.data.Store",{model:a.model,pageSize:a.pageSize,groupField:"warehouseId",autoLoad:false})},setDockItems:function(e,b){var d=this;var f={text:d.clearFilterMsg,height:24,iconCls:"icon-clearAll",handler:function(){d.filters.clearFilters()}};var c={dock:"top",height:25,xtype:"toolbar",items:e};var a={dock:"bottom",height:23,xtype:"pagingtoolbar",store:b,displayInfo:true,displayMsg:d.displayMsg,emptyMsg:d.emptyMsg};if(d.topBarAutoShow){d.dockedItems=[c,a]}},setFilter:function(b){var c=this;if(b){var a={ftype:"filters",encode:true,local:false,menuFilterText:messages["ext.filters.menuFilterText"],filters:b};c.features=[a]}}});Ext.define("Smartec.reportGrid.Panel",{extend:"Ext.grid.Panel",requires:["Ext.selection.CheckboxModel"],border:0,scroll:true,columnLines:true,emptyMsg:"没有记录",clearFilterMsg:"清除查询条件",autoAdded:true,topBarAutoShow:true,topBarHight:10,autoLoadStore:true,autoSetStore:true,initComponent:function(){var a=this;a.setStore();a.setDockItems(a.topDockedItems,a.store);a.callParent();if(a.autoAdded){Ext.getCmp("center").add(this)}},setStore:function(){var a=this;if(a.autoSetStore){a.store=Ext.create("Ext.data.Store",{model:a.model,autoLoad:this.autoLoadStore,remoteSort:true})}},setDockItems:function(d,a){var c=this;var e={text:c.clearFilterMsg,height:24,iconCls:"icon-clearAll",handler:function(){c.filters.clearFilters()}};var b={dock:"top",height:c.topBarHight,xtype:"toolbar",items:d};if(c.topBarAutoShow){c.dockedItems=[b]}}});