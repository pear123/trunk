function converterOrderStatus(b,c,a){return messages["com.arvato.smartec.Constants.OrderStatus."+b+".message"]}function converterPayStatus(b,c,a){return messages["com.arvato.smartec.Constants.PayStatus."+b+".message"]}Ext.define("Smartec.system.autoDepotRule",{alias:"widget.autoDepotRule",extend:"Smartec.grid.Panel",model:"AutoDepotRule",columns:[{text:"id",hidden:true,dataIndex:"omsAutoDepotRuleSysId"},{text:"code",hidden:true,dataIndex:"omsAutoDepotRuleCode"},{text:"statusCode",hidden:true,dataIndex:"statusCode"},{text:"规则名称",width:450,sortable:false,dataIndex:"omsAutoDepotRuleName"},{text:"规则状态",width:650,sortable:false,dataIndex:"status"}],defaultHandle:function(){Ext.MessageBox.show({title:messages["ext.system.defaultRule.message"],msg:messages["ext.system.defaultRule.tips"],width:300,buttons:Ext.MessageBox.OKCANCEL,icon:Ext.MessageBox.INFO,fn:function(c,d){if(c=="ok"){var b=Ext.getCmp("autoDepotRuleID");var e=b.getSelectionModel();record=e.getSelection()[0];var a=record.get("omsAutoDepotRuleSysId");Ext.Ajax.request({url:path("/autoDepotRule/updateOmsAutoDepotRule.json"),params:{sysId:a,tag:"DEFAULT"},success:function(f){var g=Ext.decode(f.responseText);if(g.success){Ext.Msg.alert(messages["ext.tips.tip"],messages["ext.system.success.message"],function(h){Ext.getCmp("autoDepotRuleID").getStore().load()})}else{Ext.Msg.alert(messages["ext.tips.error"],messages["ext.system.failure.message"])}},failure:function(){Ext.Msg.alert(messages["ext.tips.error"],messages["ext.tips.errorMsg"])}})}}})},addDefaultHandle:function(){Ext.Ajax.request({url:path("/autoDepotRule/initDate.json")})},groupHandle:function(){Ext.MessageBox.show({title:messages["ext.system.groupRule.message"],msg:messages["ext.system.groupRule.tips"],width:300,buttons:Ext.MessageBox.OKCANCEL,icon:Ext.MessageBox.INFO,fn:function(c,d){if(c=="ok"){var b=Ext.getCmp("autoDepotRuleID");var e=b.getSelectionModel();record=e.getSelection()[0];var a=record.get("omsAutoDepotRuleSysId");Ext.Ajax.request({url:path("/autoDepotRule/updateOmsAutoDepotRule.json"),params:{sysId:a,tag:"GROUP"},success:function(f){var g=Ext.decode(f.responseText);if(g.success){Ext.Msg.alert(messages["ext.tips.tip"],messages["ext.system.success.message"],function(h){Ext.getCmp("autoDepotRuleID").getStore().load()})}else{Ext.Msg.alert(messages["ext.tips.error"],messages["ext.system.failure.message"])}},failure:function(){Ext.Msg.alert(messages["ext.tips.error"],messages["ext.tips.errorMsg"])}})}}})},initComponent:function(){orderGridMe=this;var a=this;a.topDockedItems=[{xtype:"button",itemId:"btnAddDefault",hidden:true,height:24,text:"添加默认值",iconCls:"icon-new",handler:a.addDefaultHandle},{xtype:"button",itemId:"btnDefault",disabled:true,height:24,text:"设为默认规则",iconCls:"icon-edit",handler:a.defaultHandle},{xtype:"button",itemId:"btnGroup",disabled:true,height:24,text:"设为组合规则",iconCls:"icon-edit",handler:a.groupHandle}];a.callParent();a.getSelectionModel().on("selectionchange",function(c,b){a.down("#btnGroup").setDisabled(true);a.down("#btnDefault").setDisabled(true);if(b.length==1){if(b[0].data.omsAutoDepotRuleCode=="PRODUCT"){a.down("#btnGroup").setDisabled(true);if(b[0].data.statusCode=="DEFAULT"){a.down("#btnDefault").setDisabled(true)}else{a.down("#btnDefault").setDisabled(false)}}else{if(b[0].data.statusCode=="DEFAULT"){a.down("#btnGroup").setDisabled(false);a.down("#btnDefault").setDisabled(true)}else{if(b[0].data.statusCode=="GROUP"){a.down("#btnDefault").setDisabled(false);a.down("#btnGroup").setDisabled(true)}else{a.down("#btnDefault").setDisabled(false);a.down("#btnGroup").setDisabled(false)}}}}})}});Ext.onReady(function(){Ext.create("Smartec.system.autoDepotRule",{id:"autoDepotRuleID"})});