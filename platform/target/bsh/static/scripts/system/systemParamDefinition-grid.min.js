function converterOrderStatus(b,c,a){return messages["com.arvato.smartec.Constants.OrderStatus."+b+".message"]}function converterPayStatus(b,c,a){return messages["com.arvato.smartec.Constants.PayStatus."+b+".message"]}var spDefCode="";var spDefName="";var spDefSysId="";Ext.define("Smartec.systemParamDefinition.SystemParamDefinitionGrid",{alias:"widget.systemParamDefinitiongrid",extend:"Smartec.grid.Panel",model:"SystemParamDefinition",columns:[{text:"id",dataIndex:"systemParamDefSysId",hidden:true},{text:"系统参数的Code",width:440,sortable:false,dataIndex:"systemParamCode"},{text:"系统参数的名称",width:440,sortable:false,dataIndex:"systemParamName"},{text:"状态",width:430,sortable:false,dataIndex:"sysParamDefStatus"}],addSystemParamDefHandle:function(){var a=this.up("gridpanel");if(Ext.getCmp("addSystemParamDefinitionWindow")){Ext.getCmp("addSystemParamDefinitionWindow").show()}else{Ext.create("Ext.Window",{title:"添加系统参数",width:700,height:400,layout:"fit",draggable:false,modal:true,id:"addSystemParamDefinitionWindow",listeners:{hide:function(c){var b=Ext.getCmp("allform").getForm();b.clearInvalid();b.reset()}},closeAction:"hide",items:[allform=new Ext.form.FormPanel({id:"allform",bodyPadding:20,autoScroll:true,items:[{hideEmptyLabel:false,xtype:"displayfield",value:"<span style=color:red>*</span>为必填选项"},{fieldLabel:"系统参数的Code<span style=color:red>*</span>",xtype:"textfield",id:"systemParamCode",name:"systemParamCode",allowBlank:false,blankText:"不能为空",width:300,maxLength:50,maxLengthText:"最大长度不能超过50个字符!",regex:/^[0-9|a-z|_|A-Z]+$/,regexText:"系统参数的Code是无效的"},{hideEmptyLabel:false,xtype:"displayfield",value:"不超过50个字节（数字，字母和下划线组成）"},{fieldLabel:"系统参数名称<span style=color:red>*</span>",xtype:"textfield",id:"systemParamName",name:"systemParamName",allowBlank:false,blankText:"不能为空",width:300,maxLength:50,maxLengthText:"最大长度不能超过50个字符!"},{hideEmptyLabel:false,xtype:"displayfield",value:"不超过50个字节"},{fieldLabel:"长描述",xtype:"textarea",id:"systemParamDescription",name:"systemParamDescription",width:600,height:100,maxLength:300,maxLengthText:"客户描述的长度不能超过300字符",padding:"0 0 10 0"},{xtype:"fieldcontainer",fieldLabel:"&nbsp;&nbsp;状态",width:300,defaultType:"radiofield",padding:"0 0 10 0",defaults:{flex:1},layout:"hbox",items:[{boxLabel:"启用",name:"size",inputValue:"1",id:"systemParamDefinitionStatusRadio1",checked:true},{boxLabel:"禁用",name:"size",inputValue:"0",id:"systemParamDefinitionStatusRadio2"}]},{xtype:"button",text:"保存",iconCls:"icon-ok",handler:a.saveSystemParamDefinition}]})]}).show()}},saveSystemParamDefinition:function(){if(allform.form.isValid()){var d=Ext.getCmp("systemParamCode").getValue();var b=Ext.getCmp("systemParamName").getValue();var a=Ext.getCmp("systemParamDescription").getValue();var c="";if(Ext.getCmp("systemParamDefinitionStatusRadio1").getValue()){c=Ext.getCmp("systemParamDefinitionStatusRadio1").inputValue}else{c=Ext.getCmp("systemParamDefinitionStatusRadio2").inputValue}Ext.Ajax.request({url:path("/systemParamDefinition/form.json"),params:{systemParamCode:d,systemParamName:b,systemParamDescription:a,systemParamStatus:c,operation:"create"},success:function(e){var f=Ext.decode(e.responseText);if(f.result=="codeError"){Ext.Msg.alert(messages["ext.tips.error"],"系统参数Code已存在！");return}else{if(f.result=="nameError"){Ext.Msg.alert(messages["ext.tips.error"],"系统参数名称已存在！");return}else{if(f.result=="success"){Ext.Msg.alert(messages["ext.tips.tip"],"添加成功！",function(h){allform.form.reset();Ext.getCmp("addSystemParamDefinitionWindow").hide();var g=Ext.getCmp("SystemParamDefinitionGridId");g.getStore().load()})}}}},failure:function(){Ext.Msg.alert(messages["ext.tips.error"],messages["ext.tips.errorMsg"])}})}else{Ext.Msg.alert(messages["ext.tips.error"],"填写的内容有误！")}},editSystemParamDefHandle:function(){var b=this.up("gridpanel");var d=b.getSelectionModel();record=d.getSelection()[0];var a=record.get("systemParamDefSysId");var c=record.get("systemParamDefSysId");if(Ext.getCmp("editSystemParamDetailWindow")){Ext.getCmp("editSystemParamDetailWindow").show()}else{Ext.create("Ext.Window",{title:"查看系统参数详细",width:800,height:300,resizable:true,maximizable:true,autoScroll:true,modal:true,constrain:true,draggable:false,id:"editSystemParamDetailWindow",items:[orderDetailTabPanel=Ext.create("Ext.panel.Panel",{autoScroll:true,items:[Ext.create("Ext.panel.Panel",{layout:"fit",items:[Ext.create("Ext.form.Panel",{url:path("/systemParamDefinition/form.json?systemParamDefSysId="+a),id:"updateSystemParam",padding:"0 0 0 20",reader:new Ext.data.JsonReader({root:"result",model:"SystemParamDefinition",successProperty:"success"}),bodyPadding:20,border:0,items:[{hideEmptyLabel:false,xtype:"displayfield",value:"<span style=color:red>*</span>为必填选项"},{fieldLabel:"系统参数的Code<span style=color:red>*</span>",xtype:"displayfield",id:"systemParamCode",name:"systemParamCode",allowBlank:false,blankText:"不能为空",readOnly:true,width:300,maxLength:50,maxLengthText:"最大长度不能超过50个字符!",regex:/^[0-9|a-z|_|A-Z]+$/,regexText:"系统参数的Code是无效的"},{hideEmptyLabel:false,xtype:"displayfield",value:"不超过50个字节（数字，字母和下划线组成）"},{fieldLabel:"系统参数名称<span style=color:red>*</span>",xtype:"textfield",id:"systemParamName"+a,name:"systemParamName",allowBlank:false,blankText:"不能为空",width:300,maxLength:50,maxLengthText:"最大长度不能超过50个字符!"},{hideEmptyLabel:false,xtype:"displayfield",value:"不超过50个字节"},{fieldLabel:"长描述",xtype:"textarea",id:"systemParamDescription"+a,name:"systemParamDescription",width:600,height:100,maxLength:300,maxLengthText:"客户描述的长度不能超过300字符",padding:"0 0 10 0"},{xtype:"fieldcontainer",fieldLabel:"&nbsp;&nbsp;状态",width:300,defaultType:"radiofield",padding:"0 0 10 0",defaults:{flex:1},layout:"hbox",items:[{boxLabel:"启用",name:"size"+a,inputValue:"1",id:"systemParamStatusRadio1"+a,checked:true},{boxLabel:"禁用",name:"size"+a,inputValue:"0",id:"systemParamStatusRadio2"+a}]},{xtype:"fieldcontainer",layout:"hbox",items:[{xtype:"button",text:"保存",iconCls:"icon-ok",handler:function(){if(this.up("panel").getForm().isValid()){this.up("panel").getForm().submit({success:function(e,g){var f=g.result;if(f.result=="codeError"){Ext.Msg.alert(messages["ext.tips.error"],"系统参数Code已存在！");return}else{if(f.result=="nameError"){Ext.Msg.alert(messages["ext.tips.error"],"系统参数名称已存在！");return}else{if(f.result=="success"){Ext.Msg.alert(messages["ext.tips.tip"],"修改成功!");b.getStore().load();Ext.getCmp("editSystemParamDetailWindow").close()}}}},failure:function(){Ext.Msg.alert(messages["ext.tips.error"],messages["ext.tips.errorMsg"])}})}else{Ext.Msg.alert(messages["ext.tips.error"],"填写的内容有误!")}}}]}]})]})]})]}).show()}Ext.getCmp("updateSystemParam").getForm().load({url:path("/systemParamDefinition/form.do?systemParamDefSysId="+a),success:function(f,g){var e=g.result.data.sysParamDefStatus;var i=Ext.getCmp("systemParamStatusRadio1"+a);var h=Ext.getCmp("systemParamStatusRadio2"+a);if(e=="1"){i.setValue(true)}else{h.setValue(true)}}})},modifySystemParamHandle:function(){if(Ext.getCmp("seeSystemParamDetail")){alert("请关闭原页再打开！");return}else{var b=this.up("gridpanel");var c=b.getSelectionModel();record=c.getSelection()[0];var a=record.get("systemParamDefSysId");spDefCode=record.get("systemParamCode");spDefName=record.get("systemParamName");spDefSysId=a;Ext.define("SystemParamValue",{extend:"Ext.data.Model",fields:[{name:"sysParamValueSysId",type:"string"},{name:"systemParamName",type:"string"},{name:"systemParamValueOrder",type:"int"},{name:"sysParamValueStatus",type:"string"},{name:"systemParamDescription",type:"string"},{name:"systemParamValue",type:"string"},{name:"systemParamDefSysId",type:"string"},{name:"systemParamDefName",type:"string"},{name:"systemParamDefCode",type:"string"}],proxy:{type:"ajax",url:path("/systemParamValue/form.json?systemParamDefSysId="+a),reader:{type:"json",root:"result",totalProperty:"recordCount",successProperty:"success"}}});Ext.define("Smartec.grid.PanelSon",{alias:"widget.systemParamValuegrid",extend:"Smartec.grid.Panel",selModel:Ext.create("Ext.selection.CheckboxModel",{checkOnly:false}),plugins:[Ext.create("Ext.grid.plugin.CellEditing",{clicksToEdit:1})],columns:[{text:"sysParamValueSysId",dataIndex:"sysParamValueSysId",hidden:true},{text:"系统参数值Code",width:400,sortable:false,dataIndex:"systemParamValue"},{text:"系统参数的名称",width:400,sortable:false,dataIndex:"systemParamName"},{text:"状态",width:400,sortable:false,dataIndex:"sysParamValueStatus"},{text:"排序",width:400,sortable:false,dataIndex:"systemParamValueOrder"},{text:"系统参数主键",dataIndex:"systemParamDefSysId",hidden:true},{text:"系统参数定义名",name:"systemParamDefName",hidden:true},{text:"系统参数定义code",name:"systemParamDefCode",hidden:true}],addSystemParamValHandle:function(){var d=this.up("gridpanel");if(Ext.getCmp("addSystemParamValWindow")){Ext.getCmp("addSystemParamValWindow").show()}else{Ext.create("Ext.Window",{title:"添加系统参数值",width:700,height:400,layout:"fit",draggable:false,modal:true,id:"addSystemParamValWindow",items:[systemParamValform=new Ext.form.FormPanel({id:"systemParamValform",bodyPadding:20,autoScroll:true,items:[{hideEmptyLabel:false,labelWidth:125,xtype:"displayfield",value:"<span style=color:red>*</span>为必填选项"},{xtype:"displayfield",labelWidth:125,fieldLabel:"系统参数的Code",name:"systemParamDefCode",value:spDefCode},{xtype:"displayfield",labelWidth:125,fieldLabel:"系统参数的名称",name:"systemParamDefName",value:spDefName,width:500},{xtype:"displayfield",labelWidth:125,hidden:true,id:"systemParamDefSysId",name:"systemParamDefSysId",value:spDefSysId},{fieldLabel:"系统参数值的Code<span style=color:red>*</span>",labelWidth:125,xtype:"textfield",id:"systemParamValue",name:"systemParamValue",allowBlank:false,blankText:"不能为空",width:400,maxLength:50,maxLengthText:"最大长度不能超过50个字符!",regex:/^[0-9|a-z|_|A-Z]+$/,regexText:"系统参数值的Code是无效的"},{hideEmptyLabel:false,labelWidth:125,xtype:"displayfield",value:"不超过50个字节（数字，字母和下划线组成）"},{fieldLabel:"系统参数值的名称<span style=color:red>*</span>",labelWidth:125,xtype:"textfield",id:"systemParamName",name:"systemParamName",allowBlank:false,blankText:"不能为空",width:300,maxLength:50,maxLengthText:"最大长度不能超过50个字符!"},{hideEmptyLabel:false,labelWidth:125,xtype:"displayfield",value:"不超过50个字节"},{fieldLabel:"排序",labelWidth:125,xtype:"textfield",id:"systemParamValueOrder",name:"systemParamValueOrder",padding:"0 0 10 0",width:300,regex:/^[0-9]+$/,regexText:"排序为数字"},{fieldLabel:"长描述",labelWidth:125,xtype:"textarea",id:"systemParamDescription",name:"systemParamDescription",width:600,height:100,maxLength:300,maxLengthText:"客户描述的长度不能超过300字符",padding:"0 0 10 0"},{xtype:"fieldcontainer",fieldLabel:"&nbsp;&nbsp;状态",labelWidth:125,width:300,defaultType:"radiofield",padding:"0 0 10 0",defaults:{flex:1},layout:"hbox",items:[{boxLabel:"启用",name:"size",inputValue:"1",id:"systemParamValStatusRadio1",checked:true},{boxLabel:"禁用",name:"size",inputValue:"0",id:"systemParamValStatusRadio2"}]},{xtype:"button",text:"保存",iconCls:"icon-ok",handler:d.saveSystemParamVal}]})]}).show()}},saveSystemParamVal:function(){if(systemParamValform.form.isValid()){var i=Ext.getCmp("systemParamDefSysId").getValue();var h=Ext.getCmp("systemParamValue").getValue();var f=Ext.getCmp("systemParamName").getValue();var e=Ext.getCmp("systemParamDescription").getValue();var d=Ext.getCmp("systemParamValueOrder").getValue();var g="";if(Ext.getCmp("systemParamValStatusRadio1").getValue()){g=Ext.getCmp("systemParamValStatusRadio1").inputValue}else{g=Ext.getCmp("systemParamValStatusRadio2").inputValue}Ext.Ajax.request({url:path("/systemParamValue/operation.json"),params:{systemParamDefSysId:i,systemParamValue:h,systemParamName:f,systemParamDescription:e,sysParamValueStatus:g,systemParamValueOrder:d,operation:"create"},success:function(j){var k=Ext.decode(j.responseText);if(k.result=="codeError"){Ext.Msg.alert(messages["ext.tips.error"],"系统参数值Code已存在！");return}else{if(k.result=="nameError"){Ext.Msg.alert(messages["ext.tips.error"],"系统参数值名称已存在！");return}else{if(k.result=="success"){Ext.Msg.alert(messages["ext.tips.tip"],"添加成功！",function(m){systemParamValform.form.reset();Ext.getCmp("addSystemParamValWindow").hide();var l=Ext.getCmp("updateSystemParam");l.getStore().load()})}}}},failure:function(){Ext.Msg.alert(messages["ext.tips.error"],messages["ext.tips.errorMsg"])}})}else{Ext.Msg.alert(messages["ext.tips.error"],"填写的内容有误！")}},editSystemParamValHandle:function(){var e=this.up("gridpanel");var g=e.getSelectionModel();record=g.getSelection()[0];var d=record.get("sysParamValueSysId");var f=record.get("sysParamValueSysId");if(Ext.getCmp("editSeeSystemParamDetailWindow")){Ext.getCmp("editSeeSystemParamDetailWindow").show()}else{Ext.create("Ext.Window",{title:"查看系统参数值明细",width:800,height:300,resizable:true,maximizable:true,autoScroll:true,modal:true,constrain:true,draggable:false,id:"editSeeSystemParamDetailWindow",items:[orderDetailTabPanel=Ext.create("Ext.panel.Panel",{id:"detailTab",autoScroll:true,items:[Ext.create("Ext.panel.Panel",{layout:"fit",items:[Ext.create("Ext.form.Panel",{url:path("/systemParamValue/operation.json?sysParamValueSysId="+d+"&systemParamDefSysId="+spDefSysId),id:"seeSystemParamDetail",padding:"0 0 0 20",reader:new Ext.data.JsonReader({root:"result",model:"SystemParamValue",successProperty:"success"}),bodyPadding:20,border:0,items:[{hideEmptyLabel:false,labelWidth:125,xtype:"displayfield",value:"<span style=color:red>*</span>为必填选项"},{xtype:"displayfield",labelWidth:125,fieldLabel:"系统参数的Code",name:"systemParamDefCode",id:"systemParamDefCode"+d},{xtype:"displayfield",labelWidth:125,fieldLabel:"系统参数的名称",name:"systemParamDefName"+d,id:"systemParamDefName"+d,width:500},{xtype:"displayfield",hidden:true,id:"systemParamDefSysId"+d,name:"systemParamDefSysId"},{fieldLabel:"系统参数值的Code<span style=color:red>*</span>",labelWidth:125,xtype:"textfield",id:"systemParamValue"+d,name:"systemParamValue",allowBlank:false,blankText:"不能为空",width:400,maxLength:50,maxLengthText:"最大长度不能超过50个字符!",regex:/^[0-9|a-z|_|A-Z]+$/,regexText:"系统参数值的Code是无效的"},{hideEmptyLabel:false,labelWidth:125,xtype:"displayfield",value:"不超过50个字节（数字，字母和下划线组成）"},{fieldLabel:"系统参数值的名称<span style=color:red>*</span>",labelWidth:125,xtype:"textfield",id:"systemParamName"+d,name:"systemParamName",allowBlank:false,blankText:"不能为空",width:300,maxLength:50,maxLengthText:"最大长度不能超过50个字符!"},{hideEmptyLabel:false,labelWidth:125,xtype:"displayfield",value:"不超过50个字节"},{fieldLabel:"排序",labelWidth:125,xtype:"textfield",id:"systemParamValueOrder"+d,name:"systemParamValueOrder",padding:"0 0 10 0",width:300,regex:/^[0-9]+$/,regexText:"排序为数字"},{fieldLabel:"长描述",labelWidth:125,xtype:"textarea",id:"systemParamDescription"+d,name:"systemParamDescription",width:600,height:100,maxLength:300,maxLengthText:"客户描述的长度不能超过300字符",padding:"0 0 10 0"},{xtype:"fieldcontainer",fieldLabel:"&nbsp;&nbsp;状态",labelWidth:125,width:300,defaultType:"radiofield",padding:"0 0 10 0",defaults:{flex:1},layout:"hbox",items:[{boxLabel:"启用",name:"size"+d,inputValue:"1",id:"systemParamValStatusRadio1"+d,checked:true},{boxLabel:"禁用",name:"size"+d,inputValue:"0",id:"systemParamValStatusRadio2"+d}]},{xtype:"button",text:"保存",iconCls:"icon-ok",handler:function(){if(this.up("panel").getForm().isValid()){this.up("panel").getForm().submit({success:function(h,j){var i=j.result.result;if(i.result=="codeError"){Ext.Msg.alert(messages["ext.tips.error"],"系统参数值的Code已存在！");return}else{if(i.result=="nameError"){Ext.Msg.alert(messages["ext.tips.error"],"系统参数值的名称已存在！");return}else{Ext.Msg.alert(messages["ext.tips.tip"],"修改成功!");e.getStore().load();Ext.getCmp("editSeeSystemParamDetailWindow").close()}}},failure:function(){Ext.Msg.alert(messages["ext.tips.error"],messages["ext.tips.errorMsg"])}})}else{Ext.Msg.alert(messages["ext.tips.error"],"填写的内容有误!")}}}]})]})]})]}).show()}Ext.getCmp("seeSystemParamDetail").getForm().load({url:path("/systemParamValue/getSystemVal.json?systemParamValSysId="+d),success:function(i,j){Ext.getCmp("systemParamDefCode"+d).setValue(spDefCode);Ext.getCmp("systemParamDefName"+d).setValue(spDefName);Ext.getCmp("systemParamDefSysId"+d).setValue(spDefSysId);var h=j.result.data.sysParamValueStatus;var l=Ext.getCmp("systemParamValStatusRadio1"+d);var k=Ext.getCmp("systemParamValStatusRadio2"+d);if(h=="1"){l.setValue(true)}else{k.setValue(true)}}})},initComponent:function(){var d=this;d.topDockedItems=[{xtype:"button",itemId:"btnSystemParamValAdd",height:24,text:"添加系统参数值",iconCls:"icon-new",handler:d.addSystemParamValHandle},{xtype:"button",itemId:"btnSystemParamValEdit",disabled:true,height:24,text:"查看系统参数值明细",iconCls:"icon-edit",handler:d.editSystemParamValHandle},"->"];d.callParent();d.getSelectionModel().on("selectionchange",function(f,e){d.down("#btnSystemParamValEdit").setDisabled(!(e.length==1))})}});if(Ext.getCmp("updateSystemParam")){alert("请关闭原页再打开！");return}else{systemParamTabPanel=Ext.create("Ext.panel.Panel",{autoScroll:true,items:[Ext.create("Smartec.grid.PanelSon",{model:"SystemParamValue",id:"updateSystemParam"})]})}mainTabPanel.add({title:"系统参数维护",iconCls:"tabs",layout:"fit",items:systemParamTabPanel,closable:true}).show()}},selectSystemParam:function(){var b=Ext.getCmp("systemParamNameCondition").getValue();var c=Ext.getCmp("systemParamCodeCondition").getValue();var a=this.up("gridpanel");a.getStore().load()},initComponent:function(){orderGridMe=this;var a=this;a.topDockedItems=[{xtype:"button",itemId:"btnAdd",height:24,text:"添加系统参数",iconCls:"icon-new",handler:a.addSystemParamDefHandle},{xtype:"button",itemId:"btnEdit",disabled:true,height:24,text:"查看系统参数明细",iconCls:"icon-edit",handler:a.editSystemParamDefHandle},{xtype:"button",itemId:"btnModify",disabled:true,height:24,text:"参数信息值维护",iconCls:"icon-edit",handler:a.modifySystemParamHandle},"->",{fieldLabel:"系统参数的名称",xtype:"textfield",id:"systemParamNameCondition",name:"systemParamNameCondition"},{fieldLabel:"系统参数的code",xtype:"textfield",id:"systemParamCodeCondition",name:"systemParamCodeCondition"},{xtype:"button",itemId:"selectSystemParam",height:24,iconCls:"icon-select",text:"查询",handler:a.selectSystemParam}];a.callParent();a.getSelectionModel().on("selectionchange",function(c,b){a.down("#btnEdit").setDisabled(!(b.length==1));a.down("#btnModify").setDisabled(!(b.length==1))});a.store.on("beforeload",function(c,d){var e=Ext.getCmp("systemParamNameCondition").getValue();var f=Ext.getCmp("systemParamCodeCondition").getValue();var b={systemParamName:e,systemParamCode:f};Ext.apply(c.proxy.extraParams,b)})}});Ext.onReady(function(){Ext.create("Smartec.systemParamDefinition.SystemParamDefinitionGrid",{id:"SystemParamDefinitionGridId"})});